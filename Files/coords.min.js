/* @preserve
 * JS Function helper for https://affectedarc07.github.io/SS13WebMap
 * MIT License (https://raw.githubusercontent.com/affectedarc07/SS13WebMap/master/LICENSE.MD)
 */
function bakeLayers(data,webmap,bounds){var mapjson=data.map,pipenetjson=data.pipenet,return_dat={mapOpt:{},pipenet:{}};for(var thing in mapjson){var URL=mapjson[thing].url,zlevel=mapjson[thing].z,name=mapjson[thing].name,image=L.imageOverlay(URL,bounds),zname="Base Map";1==zlevel&&image.addTo(webmap),name?zname=name:mapjson.length>1&&(zname="Deck "+zlevel),return_dat.mapOpt[zname]=image}if(console.info("done baking map"),0==pipenetjson.length)return console.info("no pipenet found, skipping pipenet baking"),return_dat;for(var thing in pipenetjson){var URL=pipenetjson[thing].url,zlevel=pipenetjson[thing].z,image=L.imageOverlay(URL,bounds),zname="Pipenet";""!=URL&&null!=URL&&(pipenetjson.length>1&&(zname="Pipenet Z:"+zlevel),return_dat.pipenet[zname]=image)}return console.info("done baking pipenet"),return_dat}function attachListener(webmap,bounds,polygon=newpoly(webmap)){webmap.on("mousemove",e=>{var lat=Math.floor(e.latlng.lat),lng=Math.floor(e.latlng.lng),coords=leaflet2ss13(lat,lng,bounds);polygon.setLatLngs([[lat,lng],[lat+1,lng],[lat+1,lng+1],[lat,lng+1],[lat,lng]]).redraw().bindTooltip(coords.x+","+coords.y).openTooltip().addTo(webmap)});const query=readquery();if(console.info("Parsing parameter cords, param:",query),query&&"x"in query&&"y"in query){"zoom"in query&&webmap.setZoom(Number(query.zoom));let xy=ss132leaflet({x:Number(query.x),y:Number(query.y)},bounds);webmap.setView(L.latLng(xy.lat,xy.lng))}}function addMetadata(data,webmap){}function initFTL(dir="E",mode="norm",speedmodif=0){console.debug("FTL Translation imminent");const layer1=$("#layer1"),layer2=$("#layer2"),layer3=$("#layer3"),classes={tg:"TG_layer",norm:"layer"};var speeds={};speeds.l1=Math.max(80+speedmodif,1),speeds.l2=Math.max(40+speedmodif,1),speeds.l3=Math.max(20+speedmodif,1),layer1.addClass(classes[mode]+"1"),layer2.addClass(classes[mode]+"2"),layer3.addClass(classes[mode]+"3"),layer1.css("animation-name","loop_"+dir),layer2.css("animation-name","loop_"+dir),layer3.css("animation-name","loop_"+dir),layer1.animate({"animation-duration":speeds.l1+"s"},5e3),layer2.animate({"animation-duration":speeds.l2+"s"},5e3),layer3.animate({"animation-duration":speeds.l3+"s"},5e3),console.debug("FTL Translation successful")}function readquery(){var json_out={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(m,key,value)=>{json_out[key]=value}),json_out}function newpoly(webmap,config={fill:!1,color:"#40628a",weight:5}){const c=["Poly wanna cracker!","Check the crystal, you chucklefucks!","Stop wasting precius bytes on the webmap Adri!!","Wire the solars, you lazy bums!","Stop breaking the webmap!!!","WHO TOOK THE DAMN HARDSUITS?","The console blares, GET https://www.googletagmanager.com/gtag/js?id=UA-115958323-1 net::ERR_BLOCKED_BY_CLIENT",'CE, the clown ran "rm -rf /" on the NTNet station map server',"OH GOD ITS ABOUT TO DELAMINATE CALL THE SHUTTLE"];return console.warn("Poly "+["squawks","says","yells"][Math.floor(3*Math.random())]+", "+c[Math.floor(Math.random()*c.length)]),L.polygon([],config).addTo(webmap)}function leaflet2ss13(lat,lng,bounds){var coords={};return coords.y=lat+Math.abs(bounds[1][0])+1,coords.x=lng+1,coords}function ss132leaflet(coords,bounds){var latlng={};return latlng.lat=coords.y-Math.abs(bounds[1][0])||255,latlng.lng=coords.x-1,latlng}window.onload=function(){console.log("yes");let new_elem=document.createElement("h3");new_elem.classList.add("yellow"),new_elem.style.zIndex=-200,new_elem.innerHTML="This site is now deprecated - please use <a href='https://webmap.affectedarc07.co.uk/'>https://webmap.affectedarc07.co.uk/</a>.",document.getElementsByTagName("body")[0].prepend(new_elem),console.log("please")};